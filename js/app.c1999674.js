(function(){"use strict";var e={7689:function(e,t,a){var n=a(9963),i=a(6252);const o={class:"m-2"};function s(e,t,a,n,s,m){const l=(0,i.up)("BiotronPage");return(0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(l,{id:"Biotron Page 2"})])}const m=(0,i._)("h1",{class:"text-center"},"Biotron change settings",-1);function l(e,t,a,n,o,s){const l=(0,i.up)("DeviceSelector"),c=(0,i.up)("SliderCommand"),u=(0,i.up)("GroupOfCommands"),d=(0,i.up)("SelectCommand"),r=(0,i.up)("SliderCommandWithDisable"),h=(0,i.up)("DisableCommand");return(0,i.wg)(),(0,i.iD)(i.HY,null,[m,(0,i.Wm)(l,{"regex-name":"",onDevice_changed:t[0]||(t[0]=e=>{this.device=e})}),(0,i.Wm)(u,{"name-of-group":"BPM"},{objects:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)(c,{"command-label":"Plant Bpm",key:this.forceRerender,"command-object":this.commands_data.plantBpm},null,8,["command-object"])),((0,i.wg)(),(0,i.j4)(c,{"command-label":"Note Off Percent",key:this.forceRerender,"command-object":this.commands_data.noteOffPercent},null,8,["command-object"])),((0,i.wg)(),(0,i.j4)(c,{"command-label":"Light Bpm",key:this.forceRerender,"command-object":this.commands_data.lightBpm},null,8,["command-object"]))])),_:1}),(0,i.Wm)(u,{"name-of-group":"Sensitivity (fib)"},{objects:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)(c,{"command-label":"Note Distance",key:this.forceRerender,"command-object":this.commands_data.noteDistance},null,8,["command-object"])),((0,i.wg)(),(0,i.j4)(c,{"command-label":"First Value",key:this.forceRerender,"command-object":this.commands_data.firstValue},null,8,["command-object"]))])),_:1}),(0,i.Wm)(u,{"name-of-group":"Smoothness"},{objects:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)(c,{key:this.forceRerender,"command-object":this.commands_data.smoothness},null,8,["command-object"]))])),_:1}),(0,i.Wm)(u,{"name-of-group":"Scale"},{objects:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)(d,{key:this.forceRerender,"list-of-variants":this.scales,"command-object":o.commands_data.scale},null,8,["list-of-variants","command-object"]))])),_:1}),(0,i.Wm)(u,{"name-of-group":"Velocity"},{objects:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)(r,{key:this.forceRerender,"command-label":"Plant Velocity","command-object":o.commands_data.plantVelocity},null,8,["command-object"])),((0,i.wg)(),(0,i.j4)(r,{key:this.forceRerender,"command-label":"Light Velocity","command-object":o.commands_data.lightVelocity},null,8,["command-object"]))])),_:1}),(0,i.Wm)(u,{"name-of-group":"Randomness"},{objects:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)(h,{key:this.forceRerender,"command-object":o.commands_data.randomness},null,8,["command-object"]))])),_:1}),(0,i.Wm)(u,{"name-of-group":"Same Note"},{objects:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)(c,{key:this.forceRerender,"command-object":o.commands_data.same_note},null,8,["command-object"]))])),_:1}),(0,i._)("button",{onClick:t[1]||(t[1]=(...e)=>this.sendData&&this.sendData(...e)),class:"btn btn-primary mb-1",style:{width:"70%"}},"Send"),(0,i._)("button",{onClick:t[2]||(t[2]=(...e)=>this.returnDefault&&this.returnDefault(...e)),class:"btn btn-primary mb-1",style:{width:"70%"}},"Set Default")],64)}a(7658);var c=a(3577);const u={class:"row m-2"},d={for:"value_input"},r=["min","max"],h=["min","max","step"];function v(e,t,a,o,s,m){return(0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("label",d,(0,c.zw)(this.commandLabel),1),(0,i.wy)((0,i._)("input",{type:"number",id:"value_input",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>this.Value=e),min:this.commandObject.min_value,max:this.commandObject.max_value},null,8,r),[[n.nr,this.Value]]),(0,i.wy)((0,i._)("input",{type:"range",id:"range_input",class:"settings_input","onUpdate:modelValue":t[1]||(t[1]=e=>this.Value=e),min:this.commandObject.min_value,max:this.commandObject.max_value,step:this.commandObject.step},null,8,h),[[n.nr,this.Value]])])}var _=a(7327);class b{set_value(e){this.value=e}set_default(){this.value=this.default_value}constructor({name:e=null,number_command:t=0,value:a=null,min_value:n=0,max_value:i=0,step:o=1,default_value:s=0}){if((0,_.Z)(this,"flag_device",[11]),(0,_.Z)(this,"name",void 0),(0,_.Z)(this,"number_command",void 0),(0,_.Z)(this,"value",void 0),(0,_.Z)(this,"default_value",void 0),(0,_.Z)(this,"min_value",void 0),(0,_.Z)(this,"max_value",void 0),(0,_.Z)(this,"step",void 0),null===t)throw"Number Command is null";this.name=null===e?`Command number ${t}`:e,this.number_command=t,this.value=null===a?s:a,this.min_value=n,this.max_value=i,this.step=o,this.default_value=s}toString(){return`{"name": "${this.name}", "value": ${this.value}, "params": {\n            "number_command": ${this.number_command},\n            "min_value": ${this.min_value},\n            "max_value": ${this.max_value},\n            "step": ${this.step},\n            "default_value": ${this.default_value}\n        }}`}check_params(){return!(this.min_value>this.max_value)&&(!(this.value<this.min_value)&&!(this.value>this.max_value))}sendToMidi(e){if(!this.check_params())return;let t=[240];for(let a of this.flag_device)t.push(a);t.push(this.number_command);for(let a=0;a<Math.floor(this.value/127);a++)t.push(127);t.push(this.value%127),t.push(247),console.log(t),e.send(t)}}function f(e){const t=Date.now();let a=null;do{a=Date.now()}while(a-t<e)}var p={props:{commandLabel:{default:"",type:String},commandObject:{required:!0,type:b}},data(){return{Value:0}},watch:{Value(){this.checkLimit(),this.commandObject.set_value(this.Value)}},methods:{checkLimit(){this.Value>this.commandObject.max_value&&(this.Value=this.commandObject.max_value),this.Value<this.commandObject.min_value&&(this.Value=this.commandObject.min_value)}},mounted(){this.Value=this.commandObject.value}},g=a(3744);const w=(0,g.Z)(p,[["render",v],["__scopeId","data-v-234b8801"]]);var j=w;const y={class:"settings_elem"};function O(e,t,a,n,o,s){return(0,i.wg)(),(0,i.iD)("div",y,[(0,i._)("h2",null,(0,c.zw)(this.nameOfGroup),1),(0,i.WI)(e.$slots,"objects",{},void 0,!0)])}var V={name:"GroupOfCommands",methods:{getTransitionRawChildren:i.Q6},props:{nameOfGroup:{default:"",type:String}}};const x=(0,g.Z)(V,[["render",O],["__scopeId","data-v-781a2c6c"]]);var D=x;const k={class:"row m-2"},S={for:"value_input"},C=["value"];function M(e,t,a,o,s,m){return(0,i.wg)(),(0,i.iD)("div",k,[(0,i._)("label",S,(0,c.zw)(this.commandLabel),1),(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>this.Value=e),id:"scale",class:"form-control"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.listOfVariants,((e,t)=>((0,i.wg)(),(0,i.iD)("option",{key:t,value:t},(0,c.zw)(e),9,C)))),128))],512),[[n.bM,this.Value]])])}var R={props:{commandLabel:{default:"",type:String},listOfVariants:{default:{}},commandObject:{required:!0,type:b}},data(){return{Value:0}},watch:{Value(){this.commandObject.set_value(this.Value)}},mounted(){this.Value=this.commandObject.value}};const L=(0,g.Z)(R,[["render",M],["__scopeId","data-v-3ef0b675"]]);var N=L;const P={class:"form-floating mb-3"},Z=["value"],I=(0,i._)("label",{for:"device"},"Select device",-1);function W(e,t,a,o,s,m){return(0,i.wg)(),(0,i.iD)("div",P,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.currentMidiNum=e),class:"form-control"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.midiOut,((e,t)=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:t},(0,c.zw)(e.name),9,Z)))),128))],512),[[n.bM,s.currentMidiNum]]),I])}var B={props:{regexName:{default:".*",type:String}},name:"DeviceSelector",data(){return{midiIn:[],midiOut:[],currentMidiNum:0}},watch:{currentMidiNum(){this.deviceChanged()}},methods:{midiReady(e){e.addEventListener("statechange",(e=>this.initDevices(e.target))),this.initDevices(e)},initDevices(e){this.midiIn=[],this.midiOut=[];const t=e.inputs.values();for(let n=t.next();n&&!n.done;n=t.next())n.value.name.match(this.regexName)&&this.midiIn.push(n.value);const a=e.outputs.values();for(let n=a.next();n&&!n.done;n=a.next())n.value.name.match(this.regexName)&&this.midiOut.push(n.value),n.value.send([]);0!==a.length&&this.$emit("device_changed",this.midiOut[this.currentMidiNum])},deviceChanged(){this.$emit("device_changed",this.midiOut[this.currentMidiNum])}},mounted(){navigator.requestMIDIAccess({sysex:!0}).then((e=>this.midiReady(e)),(e=>console.log("Something went wrong",e)))}};const $=(0,g.Z)(B,[["render",W]]);var U=$;const z=e=>((0,i.dD)("data-v-f75ef398"),e=e(),(0,i.Cn)(),e),T={class:"row m-2"},q={class:"row"},E={for:"value_input"},G={class:"row"},H={class:"col-9"},Y=["min","max","disabled"],J=["min","max","step","disabled"],A={class:"col-3"},F={class:"container"},K={class:"col w-100"},Q={class:"switch"},X=z((()=>(0,i._)("span",{class:"slider round"},null,-1)));function ee(e,t,a,o,s,m){return(0,i.wg)(),(0,i.iD)("div",T,[(0,i._)("div",q,[(0,i._)("label",E,(0,c.zw)(this.commandLabel),1)]),(0,i._)("div",G,[(0,i._)("div",H,[(0,i.wy)((0,i._)("input",{type:"number",id:"value_input",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>this.Value=e),min:this.commandObject.min_value,max:this.commandObject.max_value,disabled:this.Disabled},null,8,Y),[[n.nr,this.Value]]),(0,i.wy)((0,i._)("input",{type:"range",id:"range_input",class:"settings_input","onUpdate:modelValue":t[1]||(t[1]=e=>this.Value=e),min:this.commandObject.min_value,max:this.commandObject.max_value,step:this.commandObject.step,disabled:this.Disabled},null,8,J),[[n.nr,this.Value]])]),(0,i._)("div",A,[(0,i._)("div",F,[(0,i._)("div",K,[(0,i._)("label",Q,[(0,i.wy)((0,i._)("input",{id:"checkbox_input",type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>this.Checked=e),onClick:t[3]||(t[3]=e=>this.checkboxEvent())},null,512),[[n.e8,this.Checked]]),X])])])])])])}var te={props:{commandLabel:{default:"",type:String},commandObject:{required:!0,type:b}},data(){return{Value:0,Checked:!0,Disabled:!1}},methods:{checkboxEvent(){this.Checked?(this.Value=this.commandObject.max_value,this.Disabled=!1):(this.Value=this.commandObject.min_value,this.Disabled=!0)},checkLimit(){this.Value>this.commandObject.max_value&&(this.Value=this.commandObject.max_value),this.Value<this.commandObject.min_value&&(this.Value=this.commandObject.min_value)}},watch:{Value(){this.commandObject.set_value(this.Value),this.checkLimit()},Checked(){this.checkboxEvent()}},mounted(){this.Value=this.commandObject.value}};const ae=(0,g.Z)(te,[["render",ee],["__scopeId","data-v-f75ef398"]]);var ne=ae;const ie=e=>((0,i.dD)("data-v-e166aaf2"),e=e(),(0,i.Cn)(),e),oe={for:"checkbox_input"},se={class:"container"},me={class:"col w-100"},le={class:"switch"},ce=ie((()=>(0,i._)("span",{class:"slider round"},null,-1)));function ue(e,t,a,o,s,m){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("label",oe,(0,c.zw)(this.commandLabel),1),(0,i._)("div",se,[(0,i._)("div",me,[(0,i._)("label",le,[(0,i.wy)((0,i._)("input",{id:"checkbox_input",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>this.Checked=e)},null,512),[[n.e8,this.Checked]]),ce])])])],64)}var de={props:{commandLabel:{default:"",type:String},commandObject:{required:!0,type:b}},data(){return{Value:0,Checked:!0}},watch:{Checked(){this.Checked?this.Value=1:this.Value=0,this.commandObject.set_value(this.Value)}},mounted(){this.Value=this.commandObject.value,this.Checked=this.Value>0}};const re=(0,g.Z)(de,[["render",ue],["__scopeId","data-v-e166aaf2"]]);var he=re,ve={components:{DisableCommand:he,SliderCommandWithDisable:ne,DeviceSelector:U,SelectCommand:N,GroupOfCommands:D,SliderCommand:j},props:{id:{type:String,required:!0}},methods:{sendData(){for(let e in this.commands_data)this.commands_data[e].sendToMidi(this.device),f(10);this.saveData()},saveData(){let e=[];for(let a in this.commands_data)e.push(this.commands_data[a].toString());let t={commands:e};localStorage.setItem(this.id,JSON.stringify(t))},loadData(){null===localStorage.getItem(this.id)&&this.saveData();for(let e of JSON.parse(localStorage.getItem(this.id)).commands){let t=JSON.parse(e);this.commands_data[t.name].set_value(t.value)}},returnDefault(){for(let e in this.commands_data)this.commands_data[e].set_default();this.saveData(),this.forceRerender+=1}},data(){return{scales:["Major","Minor","Chrom","Dorian","Mixolydian","Lydian","Wholetone","Minblues","Minpen","Majpen","Diminished"],device:null,forceRerender:0,commands_data:{plantBpm:new b({name:"plantBpm",number_command:0,default_value:60,max_value:1e3}),lightBpm:new b({name:"lightBpm",number_command:9,default_value:4,max_value:30}),noteOffPercent:new b({name:"noteOffPercent",number_command:12,default_value:100,max_value:30}),noteDistance:new b({name:"noteDistance",number_command:1,default_value:50,max_value:100}),firstValue:new b({name:"firstValue",number_command:2,default_value:10,max_value:100}),smoothness:new b({name:"smoothness",number_command:3,max_value:99}),scale:new b({name:"scale",number_command:4,default_value:0}),plantVelocity:new b({name:"plantVelocity",number_command:5,default_value:127,max_value:127}),lightVelocity:new b({name:"lightVelocity",number_command:6,default_value:127,max_value:127}),randomness:new b({name:"randomness",number_command:10,default_value:1}),same_note:new b({name:"same_note",number_command:11,default_value:0,max_value:10})}}},created(){null===localStorage.getItem(this.id)?this.saveData():this.loadData()}};const _e=(0,g.Z)(ve,[["render",l]]);var be=_e,fe={name:"App",components:{BiotronPage:be}};const pe=(0,g.Z)(fe,[["render",s]]);var ge=pe;a(8877);(0,n.ri)(ge).mount("#app")}},t={};function a(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,n,i,o){if(!n){var s=1/0;for(u=0;u<e.length;u++){n=e[u][0],i=e[u][1],o=e[u][2];for(var m=!0,l=0;l<n.length;l++)(!1&o||s>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(m=!1,o<s&&(s=o));if(m){e.splice(u--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,i,o]}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,o,s=n[0],m=n[1],l=n[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(i in m)a.o(m,i)&&(a.m[i]=m[i]);if(l)var u=l(a)}for(t&&t(n);c<s.length;c++)o=s[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},n=self["webpackChunkWebMidiPlaytronica"]=self["webpackChunkWebMidiPlaytronica"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(7689)}));n=a.O(n)})();
//# sourceMappingURL=app.c1999674.js.map