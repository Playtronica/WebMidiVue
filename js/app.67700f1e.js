(function(){"use strict";var e={7582:function(e,t,a){var n=a(9963),o=a(2201),i=a(6252);const s={class:"d-flex justify-content-center"},l={class:"nav nav-pills"},c={class:"nav-item"},d=(0,i.Uk)("Biotron"),m=(0,i.Uk)("Biotron"),r={class:"nav-item"},u=(0,i.Uk)("TouchMe"),h=(0,i.Uk)("TouchMe"),p={class:"m-2"};function _(e,t,a,n,o,_){const v=(0,i.up)("router-link"),g=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("header",s,[(0,i._)("ul",l,[(0,i._)("li",c,["/biotron"===this.url?((0,i.wg)(),(0,i.j4)(v,{key:0,to:"/biotron",onClick:this.update,class:"nav-link active"},{default:(0,i.w5)((()=>[d])),_:1},8,["onClick"])):((0,i.wg)(),(0,i.j4)(v,{key:1,to:"/biotron",onClick:this.update,class:"nav-link"},{default:(0,i.w5)((()=>[m])),_:1},8,["onClick"]))]),(0,i._)("li",r,["/touchme"===this.url?((0,i.wg)(),(0,i.j4)(v,{key:0,onClick:this.update,to:"/touchme",class:"nav-link active"},{default:(0,i.w5)((()=>[u])),_:1},8,["onClick"])):((0,i.wg)(),(0,i.j4)(v,{key:1,to:"/touchme",onClick:this.update,class:"nav-link"},{default:(0,i.w5)((()=>[h])),_:1},8,["onClick"]))])])]),(0,i._)("div",p,[(0,i.Wm)(g)])],64)}var v={name:"App",data(){return{url:String,forceRerender:0}},mounted(){console.log("Hello! You`re curious, aren`t you?")},methods:{update(){this.forceRerender++}}},g=a(3744);const b=(0,g.Z)(v,[["render",_]]);var f=b;a(8877);const w=(0,i._)("h1",{class:"text-center"},"Biotron change settings",-1),y=(0,i._)("p",null,"BPM - how many notes from the plant will be generated per minute",-1),x=(0,i._)("p",null,"Note Off Percent - how many percent of the time the note will sound, where 100 is the full sound before the note changes, 50 is half the time the note is played",-1),D=(0,i._)("p",null,"Light Bpm - once every number of notes from the plant the note from the photoresistor will sound",-1),S=(0,i._)("p",null,"Sensitivity (fib) - Fibonacci parameter responsible for the note distribution curve",-1),V=(0,i._)("p",null,"Smoothness - the smoothness of the notes played, where 0 is an instant change in notes, 99 is a smooth change (notes change over time)",-1),j=(0,i._)("p",null,"Scale - scale played from the device",-1),C={class:"row"},k={class:"col"},O=(0,i._)("label",{for:"randomPlantVelSwitch"},"Humanize",-1),P={class:"col"},I=(0,i._)("label",{for:"plantVelDis"},"Mute",-1),R={key:0},M={key:0},E={key:1},N=(0,i._)("p",null,"Plant - responsible for the notes generated by the plant",-1),L={class:"row"},B={class:"col"},A=(0,i._)("label",{for:"randomLightVelSwitch"},"Humanize",-1),U={class:"col"},T=(0,i._)("label",{for:"lightVelDis"},"Mute",-1),W={key:0,class:"row"},z={key:0},Z={key:1},H=(0,i._)("p",null,"Light - responsible for notes generated from the photoresistor",-1),F=(0,i._)("p",null,"Velocity - pressing force",-1),$=(0,i._)("p",null,"Humanize - Velocity randomization at a controlled interval",-1),q=(0,i._)("p",null,"Mute - disable note generation from the channel",-1),G=(0,i._)("p",null,"Ultra sensitivity - Increases the sensitivity of generation from a plant",-1),J=(0,i._)("p",null,"Same Note - notes that are played only when changing notes with a customizable step, where 1 - produces a note if the notes have changed by 1 note, 10 if there has been a shift by 10 notes",-1),K=(0,i._)("p",null,"Light Notes Range - setting the range of notes played from the photoresistor (lower and upper limits are set)",-1),Y=["disabled"],Q=(0,i._)("p",null,"Send - sending settings to the device",-1),X=(0,i._)("p",null,"Set Default - basic settings are set on the site (to apply them, you need to click Send)",-1),ee=(0,i._)("p",null,"Create Preset - saves settings to a file",-1),te=(0,i._)("p",null,"Drop Preset Here - you need to transfer the file there by drag drop, or by clicking on the button, select the settings file.",-1);function ae(e,t,a,o,s,l){const c=(0,i.up)("DeviceSelector"),d=(0,i.up)("PatchSelector"),m=(0,i.up)("SliderCommand"),r=(0,i.up)("GroupOfCommands"),u=(0,i.up)("SelectCommand"),h=(0,i.up)("SwitchComponent"),p=(0,i.up)("SliderRangeCommand"),_=(0,i.up)("DisableCommand"),v=(0,i.up)("FileDropArea");return(0,i.wg)(),(0,i.iD)("div",{onKeyup:t[4]||(t[4]=(0,n.D2)(((...e)=>this.sendData&&this.sendData(...e)),["enter"]))},[w,(0,i.Wm)(c,{"regex-name":"Biotron",onDevice_changed:t[0]||(t[0]=e=>{this.device=e})}),((0,i.wg)(),(0,i.j4)(d,{patches:this.patches,key:this.forceRerender+this.patchRerender,page_id:this.id},null,8,["patches","page_id"])),(0,i.Wm)(r,{"name-of-group":"BPM"},{objects:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)(m,{"command-label":"Plant Bpm",key:this.forceRerender,"command-object":this.commands_data.plantBpm},null,8,["command-object"])),((0,i.wg)(),(0,i.j4)(m,{"command-label":"Note Off Percent",key:this.forceRerender,"command-object":this.commands_data.noteOffPercent},null,8,["command-object"])),((0,i.wg)(),(0,i.j4)(m,{"command-label":"Light Bpm",key:this.forceRerender,"command-object":this.commands_data.lightBpm},null,8,["command-object"]))])),description:(0,i.w5)((()=>[y,x,D])),_:1}),(0,i.Wm)(r,{"name-of-group":"Sensitivity (fib)"},{objects:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)(m,{"command-label":"Note Distance",key:this.forceRerender,"command-object":this.commands_data.noteDistance},null,8,["command-object"])),((0,i.wg)(),(0,i.j4)(m,{"command-label":"First Value",key:this.forceRerender,"command-object":this.commands_data.firstValue},null,8,["command-object"]))])),description:(0,i.w5)((()=>[S])),_:1}),(0,i.Wm)(r,{"name-of-group":"Smoothness"},{objects:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)(m,{key:this.forceRerender,"command-object":this.commands_data.smoothness},null,8,["command-object"]))])),description:(0,i.w5)((()=>[V])),_:1}),(0,i.Wm)(r,{"name-of-group":"Scale"},{objects:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)(u,{key:this.forceRerender,"list-of-variants":this.scales,"command-object":s.commands_data.scale},null,8,["list-of-variants","command-object"]))])),description:(0,i.w5)((()=>[j])),_:1}),(0,i.Wm)(r,{"name-of-group":"Velocity"},{objects:(0,i.w5)((()=>[(0,i.Wm)(r,{"name-of-group":"Plant"},{objects:(0,i.w5)((()=>[(0,i._)("div",C,[(0,i._)("div",k,[O,(0,i.Wm)(h,{id:"randomPlantVelSwitch","model-value":this.commands_data.randomPlantVelocity},null,8,["model-value"])]),(0,i._)("div",P,[I,(0,i.Wm)(h,{id:"plantVelDis","model-value":s.commands_data.plant_no_velocity},null,8,["model-value"])])]),s.commands_data.plant_no_velocity.value?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",R,[this.commands_data.randomPlantVelocity.value?((0,i.wg)(),(0,i.iD)("div",E,[((0,i.wg)(),(0,i.j4)(p,{key:this.forceRerender,"max-command-object":s.commands_data.maxPlantVelocity,"min-command-object":s.commands_data.minPlantVelocity},null,8,["max-command-object","min-command-object"]))])):((0,i.wg)(),(0,i.iD)("div",M,[((0,i.wg)(),(0,i.j4)(m,{key:this.forceRerender,"command-object":s.commands_data.maxPlantVelocity},null,8,["command-object"]))]))]))])),description:(0,i.w5)((()=>[N])),_:1}),(0,i.Wm)(r,{"name-of-group":"Light"},{objects:(0,i.w5)((()=>[(0,i._)("div",L,[(0,i._)("div",B,[A,(0,i.Wm)(h,{id:"randomLightVelSwitch","model-value":this.commands_data.randomLightVelocity},null,8,["model-value"])]),(0,i._)("div",U,[T,(0,i.Wm)(h,{id:"lightVelDis","model-value":s.commands_data.light_no_velocity},null,8,["model-value"])])]),s.commands_data.light_no_velocity.value?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",W,[this.commands_data.randomLightVelocity.value?((0,i.wg)(),(0,i.iD)("div",Z,[((0,i.wg)(),(0,i.j4)(p,{key:this.forceRerender,"max-command-object":s.commands_data.maxLightVelocity,"min-command-object":s.commands_data.minLightVelocity},null,8,["max-command-object","min-command-object"]))])):((0,i.wg)(),(0,i.iD)("div",z,[((0,i.wg)(),(0,i.j4)(m,{key:this.forceRerender,"command-object":s.commands_data.maxLightVelocity},null,8,["command-object"]))]))]))])),description:(0,i.w5)((()=>[H])),_:1})])),description:(0,i.w5)((()=>[F,$,q])),_:1}),(0,i.Wm)(r,{"name-of-group":"Ultra sensitivity"},{objects:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)(_,{key:this.forceRerender,"command-object":s.commands_data.randomness},null,8,["command-object"]))])),description:(0,i.w5)((()=>[G])),_:1}),(0,i.Wm)(r,{"name-of-group":"Same Note"},{objects:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)(m,{key:this.forceRerender,"command-object":s.commands_data.same_note},null,8,["command-object"]))])),description:(0,i.w5)((()=>[J])),_:1}),(0,i.Wm)(r,{"name-of-group":"Light Notes Range"},{objects:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)(p,{key:this.forceRerender,"max-command-object":s.commands_data.max_range_light_note,"min-command-object":s.commands_data.min_range_light_note},null,8,["max-command-object","min-command-object"]))])),description:(0,i.w5)((()=>[K])),_:1}),(0,i._)("button",{onClick:t[1]||(t[1]=(...e)=>this.sendData&&this.sendData(...e)),disabled:null===this.device,class:"btn btn-primary mb-1",style:{width:"70%"}},"Send",8,Y),(0,i._)("button",{onClick:t[2]||(t[2]=(...e)=>this.createPreset&&this.createPreset(...e)),class:"btn btn-primary mb-1",style:{width:"70%"}},"Create Preset"),(0,i.Wm)(v,{name:"Drop Preset Here",onGet_drop:t[3]||(t[3]=e=>l.loadDataFromPreset(e))}),(0,i.Wm)(r,null,{description:(0,i.w5)((()=>[Q,X,ee,te])),_:1})],32)}a(7658);var ne=a(3577);const oe={class:"row m-2"},ie={for:"value_input"},se=["min","max"],le=["min","max","step"];function ce(e,t,a,o,s,l){return(0,i.wg)(),(0,i.iD)("div",oe,[(0,i._)("label",ie,(0,ne.zw)(this.commandLabel),1),(0,i.wy)((0,i._)("input",{type:"number",id:"value_input",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>this.Value=e),min:this.commandObject.min_value,max:this.commandObject.max_value,onInput:t[1]||(t[1]=(...e)=>this.changed&&this.changed(...e))},null,40,se),[[n.nr,this.Value]]),(0,i.wy)((0,i._)("input",{type:"range",id:"range_input",class:"settings_input","onUpdate:modelValue":t[2]||(t[2]=e=>this.Value=e),min:this.commandObject.min_value,max:this.commandObject.max_value,step:this.commandObject.step,onInput:t[3]||(t[3]=(...e)=>this.changed&&this.changed(...e))},null,40,le),[[n.nr,this.Value]])])}var de=a(7327);class me{set_value(e){this.value=e}set_default(){this.value=this.default_value}constructor({name:e=null,number_command:t=0,value:a=null,min_value:n=0,max_value:o=127,step:i=1,default_value:s=0,sendable:l=!0}){if((0,de.Z)(this,"flag_device",[11]),(0,de.Z)(this,"name",void 0),(0,de.Z)(this,"number_command",void 0),(0,de.Z)(this,"value",void 0),(0,de.Z)(this,"default_value",void 0),(0,de.Z)(this,"min_value",void 0),(0,de.Z)(this,"max_value",void 0),(0,de.Z)(this,"step",void 0),(0,de.Z)(this,"sendable",void 0),null===t)throw"Number Command is null";this.name=null===e?`Command number ${t}`:e,this.number_command=t,this.value=null===a?s:a,this.min_value=n,this.max_value=o,this.step=i,this.default_value=s,this.sendable=l}toString(){return`{"name": "${this.name}", "value": ${this.value}, "params": {\n            "number_command": ${this.number_command},\n            "min_value": ${this.min_value},\n            "max_value": ${this.max_value},\n            "step": ${this.step},\n            "default_value": ${this.default_value}\n        }}`}toShortDict(){return{name:this.name,value:this.value}}check_params(){return!(this.min_value>this.max_value)&&(!(this.value<this.min_value)&&!(this.value>this.max_value))}sendToMidi(e){if(!this.sendable)return;if(!this.check_params())return;let t=[240];for(let a of this.flag_device)t.push(a);t.push(this.number_command);for(let a=0;a<Math.floor(this.value/127);a++)t.push(127);t.push(this.value%127),t.push(247),console.log(t),e.send(t)}}function re(e){const t=Date.now();let a=null;do{a=Date.now()}while(a-t<e)}var ue={props:{commandLabel:{default:"",type:String},commandObject:{required:!0,type:me}},emits:["changedValue"],data(){return{Value:0}},watch:{Value(){this.checkLimit(),this.commandObject.set_value(parseInt(this.Value))}},methods:{checkLimit(){this.Value>this.commandObject.max_value&&(this.Value=this.commandObject.max_value),this.Value<this.commandObject.min_value&&(this.Value=this.commandObject.min_value)},changed(){document.dispatchEvent(new CustomEvent("InputChanged"))}},created(){this.Value=this.commandObject.value}};const he=(0,g.Z)(ue,[["render",ce],["__scopeId","data-v-6e4d834c"]]);var pe=he;const _e={class:"settings_elem"},ve={key:0,class:"description_elem"};function ge(e,t,a,n,o,s){return(0,i.wg)(),(0,i.iD)("div",_e,[(0,i._)("h2",null,(0,ne.zw)(this.nameOfGroup),1),(0,i.WI)(e.$slots,"objects",{},void 0,!0),this.$slots.description?((0,i.wg)(),(0,i.iD)("div",ve,[(0,i.WI)(e.$slots,"description",{},void 0,!0)])):(0,i.kq)("",!0)])}var be={name:"GroupOfCommands",methods:{getTransitionRawChildren:i.Q6},props:{nameOfGroup:{default:"",type:String}},data(){return{}}};const fe=(0,g.Z)(be,[["render",ge],["__scopeId","data-v-bc256946"]]);var we=fe;const ye={class:"row m-2"},xe={for:"value_input"},De=["value"];function Se(e,t,a,o,s,l){return(0,i.wg)(),(0,i.iD)("div",ye,[(0,i._)("label",xe,(0,ne.zw)(this.commandLabel),1),(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>this.Value=e),id:"scale",class:"form-control",onInput:t[1]||(t[1]=(...e)=>l.changed&&l.changed(...e))},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.listOfVariants,((e,t)=>((0,i.wg)(),(0,i.iD)("option",{key:t,value:t},(0,ne.zw)(e),9,De)))),128))],544),[[n.bM,this.Value]])])}var Ve={props:{commandLabel:{default:"",type:String},listOfVariants:{default:{}},commandObject:{required:!0,type:me}},data(){return{Value:0}},methods:{changed(){document.dispatchEvent(new CustomEvent("InputChanged"))}},watch:{Value(){this.commandObject.set_value(this.Value)}},mounted(){this.Value=this.commandObject.value}};const je=(0,g.Z)(Ve,[["render",Se],["__scopeId","data-v-1c6700c3"]]);var Ce=je;const ke={class:"form-floating mb-3"},Oe=["value"],Pe=(0,i._)("label",{for:"device"},"Select device",-1);function Ie(e,t,a,o,s,l){return(0,i.wg)(),(0,i.iD)("div",ke,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.currentMidiNum=e),class:"form-control"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.midiOut,((e,t)=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:t},(0,ne.zw)(e.name),9,Oe)))),128))],512),[[n.bM,s.currentMidiNum]]),Pe])}var Re={props:{regexName:{default:".*",type:String}},name:"DeviceSelector",data(){return{midiIn:[],midiOut:[],currentMidiNum:0}},watch:{currentMidiNum(){this.deviceChanged()}},methods:{midiReady(e){e.addEventListener("statechange",(e=>this.initDevices(e.target))),this.initDevices(e)},initDevices(e){this.midiIn=[],this.midiOut=[];const t=e.inputs.values();for(let n=t.next();n&&!n.done;n=t.next())n.value.name.match(this.regexName)&&this.midiIn.push(n.value);const a=e.outputs.values();for(let n=a.next();n&&!n.done;n=a.next())n.value.name.match(this.regexName)&&(this.midiOut.push(n.value),console.log(n.value),n.value.send([]));0!==a.length&&this.$emit("device_changed",this.midiOut[this.currentMidiNum])},deviceChanged(){this.$emit("device_changed",this.midiOut[this.currentMidiNum])}},mounted(){navigator.requestMIDIAccess({sysex:!0}).then((e=>this.midiReady(e)),(e=>console.log("Something went wrong",e)))}};const Me=(0,g.Z)(Re,[["render",Ie]]);var Ee=Me;const Ne=e=>((0,i.dD)("data-v-14b605c5"),e=e(),(0,i.Cn)(),e),Le={for:"checkbox_input"},Be={class:"container"},Ae={class:"col w-100",style:{"margin-bottom":"2%"}},Ue={class:"switch"},Te=Ne((()=>(0,i._)("span",{class:"slider round"},null,-1)));function We(e,t,a,o,s,l){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("label",Le,(0,ne.zw)(this.commandLabel),1),(0,i._)("div",Be,[(0,i._)("div",Ae,[(0,i._)("label",Ue,[(0,i.wy)((0,i._)("input",{id:"checkbox_input",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>this.Checked=e)},null,512),[[n.e8,this.Checked]]),Te])])])],64)}var ze={props:{commandLabel:{default:"",type:String},commandObject:{required:!0,type:me}},data(){return{Value:0,Checked:!0}},watch:{Checked(){this.Checked?this.Value=127:this.Value=0,this.commandObject.set_value(this.Value)}},mounted(){this.Value=this.commandObject.value,this.Checked=this.Value>0}};const Ze=(0,g.Z)(ze,[["render",We],["__scopeId","data-v-14b605c5"]]);var He=Ze;const Fe={id:"dropZone",class:"text-center"};function $e(e,t,a,n,o,s){return(0,i.wg)(),(0,i.iD)("div",{class:"droparea",onClick:t[1]||(t[1]=(...e)=>this.dropAreaClick&&this.dropAreaClick(...e)),onDragover:t[2]||(t[2]=e=>e.preventDefault()),onDrop:t[3]||(t[3]=e=>s.dropAreaDrop(e))},[(0,i._)("div",Fe,[(0,i._)("input",{type:"file",id:"load_preset",style:{display:"none"},onChange:t[0]||(t[0]=e=>s.loadPresetChanged(e))},null,32),(0,i._)("p",null,(0,ne.zw)(this.name),1)])],32)}var qe={methods:{dropAreaClick(){document.getElementById("load_preset").click()},dropAreaDrop(e){e.preventDefault();let t=e.dataTransfer.files[0],a=new FileReader,n=this;a.onload=function(e){n.$emit("get_drop",e.target.result)},"text/plain"!==t.type&&".scl"!==t.name.substring(t.name.lastIndexOf("."))||a.readAsText(t)},loadPresetChanged(e){let t=e.srcElement.files[0],a=new FileReader,n=this;a.onload=function(e){n.$emit("get_drop",e.target.result)},"text/plain"===t.type&&(a.readAsText(t),document.getElementById("load_preset").value="")}},props:{name:{type:String,default:"Drop preset here"}}};const Ge=(0,g.Z)(qe,[["render",$e],["__scopeId","data-v-fa3869ac"]]);var Je=Ge,Ke=a(5702);const Ye={class:"row m-2"},Qe={for:"value_input"},Xe={class:"row"},et={class:"col"},tt=["min","max"],at=(0,i.Uk)(" - "),nt={class:"col"},ot=["min","max"],it={class:"row"};function st(e,t,a,o,s,l){const c=(0,i.up)("MultiRangeSlider");return(0,i.wg)(),(0,i.iD)("div",Ye,[(0,i._)("label",Qe,(0,ne.zw)(this.commandLabel),1),(0,i._)("div",Xe,[(0,i._)("div",et,[(0,i.wy)((0,i._)("input",{type:"number",id:"value_input_min",class:"form-control",onInput:t[0]||(t[0]=(...e)=>this.changed&&this.changed(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>this.minValue=e),min:this.minCommandObject.min_value,max:this.minCommandObject.max_value},null,40,tt),[[n.nr,this.minValue]])]),at,(0,i._)("div",nt,[(0,i.wy)((0,i._)("input",{type:"number",id:"value_input_max",class:"form-control",onInput:t[2]||(t[2]=(...e)=>this.changed&&this.changed(...e)),"onUpdate:modelValue":t[3]||(t[3]=e=>this.maxValue=e),min:this.minCommandObject.min_value,max:this.maxCommandObject.max_value},null,40,ot),[[n.nr,this.maxValue]])])]),(0,i._)("div",it,[(0,i.Wm)(c,{baseClassName:"multi-range-slider-bar-only",minValue:this.minValue,maxValue:this.maxValue,max:this.maxCommandObject.max_value,min:this.minCommandObject.min_value,step:this.minCommandObject.step,onInput:l.update_oBarValues},null,8,["minValue","maxValue","max","min","step","onInput"])])])}var lt=a(3103),ct={components:{MultiRangeSlider:lt.Z},props:{commandLabel:{default:"",type:String},minCommandObject:{required:!0,type:me},maxCommandObject:{required:!0,type:me}},data(){return{minValue:0,maxValue:0}},watch:{},methods:{update_oBarValues(e){this.minValue=e.minValue,this.maxValue=e.maxValue,this.updateValue(),document.dispatchEvent(new CustomEvent("InputChanged"))},changed(){},updateValue(){this.minValue<this.minCommandObject.min_value&&(this.minValue=this.minCommandObject),this.minValue>this.maxValue&&(this.minValue=this.maxValue),this.minCommandObject.set_value(this.minValue),this.maxValue<this.minValue&&(this.maxValue=this.minValue),this.maxValue>this.maxCommandObject.max_value&&(this.minValue=this.maxCommandObject.max_value),this.maxCommandObject.set_value(this.maxValue)}},created(){this.minValue=this.minCommandObject.value,this.maxValue=this.maxCommandObject.value,this.minValue>this.maxValue&&(this.minValue=this.maxValue)}};const dt=(0,g.Z)(ct,[["render",st]]);var mt=dt;const rt=e=>((0,i.dD)("data-v-2961c6f6"),e=e(),(0,i.Cn)(),e),ut={class:"container"},ht={class:"col w-100"},pt={class:"switch"},_t=["checked"],vt=rt((()=>(0,i._)("span",{class:"slider round"},null,-1)));function gt(e,t,a,n,o,s){return(0,i.wg)(),(0,i.iD)("div",ut,[(0,i._)("div",ht,[(0,i._)("label",pt,[(0,i._)("input",{id:"checkbox_input",type:"checkbox",checked:a.modelValue.value,onClick:t[0]||(t[0]=e=>a.modelValue.set_value(e.target.checked)),onInput:t[1]||(t[1]=(...e)=>this.changed&&this.changed(...e))},null,40,_t),vt])])])}var bt={name:"SwitchComponent",props:{modelValue:{type:me}},emits:["update:modelValue"],methods:{changed(){document.dispatchEvent(new CustomEvent("InputChanged"))}}};const ft=(0,g.Z)(bt,[["render",gt],["__scopeId","data-v-2961c6f6"]]);var wt=ft,yt=a(2262);class xt{constructor(){(0,de.Z)(this,"DB_NAME","Playtronica_WebMIDI_db"),(0,de.Z)(this,"STORE_NAME","Biotron_Patches"),(0,de.Z)(this,"VERSION",1),(0,de.Z)(this,"DEFAULT",{name:"Test Patch",saved:!0,editable:!1,data:[]});const e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB;e||console.log("IndexedDB could not be found in this browser.")}async openDB(){const e=indexedDB.open(this.DB_NAME,this.VERSION);let t=this;e.onerror=function(e){console.error("An error occurred with IndexedDB"),console.error(e)},e.onupgradeneeded=function(){const a=e.result;a.objectStoreNames.contains(t.STORE_NAME)&&a.deleteObjectStore(t.STORE_NAME);let n=a.createObjectStore(t.STORE_NAME,{keyPath:"id",autoIncrement:!0});n.put((0,yt.IU)(t.DEFAULT))},e.onsuccess=function(){console.log("Database opened successfully"),e.result.close()}}createPatch(e,t){const a=indexedDB.open(this.DB_NAME,this.VERSION);let n=this;a.onerror=function(e){console.error("An error occurred with IndexedDB"),console.error(e)},a.onupgradeneeded=function(){console.log("Update Page")},a.onsuccess=function(){const o=a.result,i=o.transaction(n.STORE_NAME,"readwrite"),s=i.objectStore(n.STORE_NAME);t?s.put({name:t,editable:!0,saved:!0,data:e}):s.put({name:"Unsaved Patch",editable:!0,saved:!1,data:e}),i.oncomplete=function(){o.close()}}}async getPatch(e){let t=this;return new Promise((a=>{const n=indexedDB.open(this.DB_NAME,this.VERSION);n.onerror=function(e){console.error("An error occurred with IndexedDB"),console.error(e)},n.onupgradeneeded=function(){console.log("Update Page")},n.onsuccess=function(){const o=n.result,i=o.transaction(t.STORE_NAME,"readonly"),s=i.objectStore(t.STORE_NAME);let l;l=e?s.get(parseInt(e)):s.getAll(),l.onsuccess=function(){a(l.result)},i.oncomplete=function(){o.close()}}}))}async getUnsavedPatch(){let e=await this.getPatch();return e.at(-1).saved?(this.createPatch((0,yt.IU)(this.DEFAULT)),e=await this.getPatch(),e.at(-1).id):e.at(-1).id}deletePatch(e){if(!e)return;let t=this;const a=indexedDB.open(this.DB_NAME,this.VERSION);a.onerror=function(e){console.error("An error occurred with IndexedDB"),console.error(e)},a.onupgradeneeded=function(){console.log("Update Page")},a.onsuccess=function(){const n=a.result,o=n.transaction(t.STORE_NAME,"readwrite"),i=o.objectStore(t.STORE_NAME);let s=i.delete(e);s.onsuccess=function(){console.log("Patch deleted")},o.oncomplete=function(){n.close()}}}updatePatch(e,t){if(!e||!t)return;let a=this;const n=indexedDB.open(this.DB_NAME,this.VERSION);n.onerror=function(e){console.error("An error occurred with IndexedDB"),console.error(e)},n.onupgradeneeded=function(){console.log("Update Page")},n.onsuccess=function(){const o=n.result,i=o.transaction(a.STORE_NAME,"readwrite"),s=i.objectStore(a.STORE_NAME);let l;l=e?s.get(parseInt(e)):s.getAll(),l.onsuccess=function(){l.result.data=t,s.put(l.result)},i.oncomplete=function(){o.close()}}}savePatch(e,t){if(!e||!t)return;let a=this;const n=indexedDB.open(this.DB_NAME,this.VERSION);n.onerror=function(e){console.error("An error occurred with IndexedDB"),console.error(e)},n.onupgradeneeded=function(){console.log("Update Page")},n.onsuccess=function(){const o=n.result,i=o.transaction(a.STORE_NAME,"readwrite"),s=i.objectStore(a.STORE_NAME);let l;l=e?s.get(parseInt(e)):s.getAll(),l.onsuccess=function(){l.result.name=t,l.result.saved=!0,s.put(l.result)},i.oncomplete=function(){o.close()}}}}class Dt extends xt{constructor(...e){super(...e),(0,de.Z)(this,"STORE_NAME","Biotron_Patches"),(0,de.Z)(this,"VERSION",1),(0,de.Z)(this,"DEFAULT",{name:"Biotron Default Patch",saved:!0,editable:!1,data:[{name:"plantBpm",value:60},{name:"lightBpm",value:4},{name:"noteOffPercent",value:100},{name:"noteDistance",value:50},{name:"firstValue",value:10},{name:"smoothness",value:0},{name:"scale",value:0},{name:"minPlantVelocity",value:74},{name:"maxPlantVelocity",value:75},{name:"minLightVelocity",value:74},{name:"maxLightVelocity",value:75},{name:"randomness",value:0},{name:"same_note",value:0},{name:"min_range_light_note",value:24},{name:"max_range_light_note",value:48},{name:"plant_no_velocity",value:0},{name:"light_no_velocity",value:0},{name:"randomPlantVelocity",value:0},{name:"randomLightVelocity",value:0}]})}}const St={class:"input-group mb-3"},Vt=["value"],jt=["data-bs-target"],Ct={class:"modal fade",id:"saveModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},kt={class:"modal-dialog"},Ot={class:"modal-content"},Pt=(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Save Patch"),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Cancel"})],-1),It={class:"modal-body"},Rt={class:"mb-3"},Mt=(0,i._)("label",{for:"recipient-name",class:"col-form-label"},"Patch Name",-1),Et={class:"modal-footer"},Nt=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1),Lt={class:"modal fade",id:"deleteModel",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Bt={class:"modal-dialog"},At={class:"modal-content"},Ut=(0,i.uE)('<div class="modal-header"><h5 class="modal-title" id="exampleModalLabel">Delete Patch</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cancel"></button></div><div class="modal-body"><div class="mb-3"> Do you really want to delete this patch? </div></div>',2),Tt={class:"modal-footer"},Wt=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1);function zt(e,t,a,o,s,l){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",St,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>this.id=e),class:"form-control",onChange:t[1]||(t[1]=(...e)=>this.patchChanged&&this.patchChanged(...e))},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.patches,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,ne.zw)(e.name),9,Vt)))),128))],544),[[n.bM,this.id]]),(0,i._)("div",{class:"input-group-prepend",style:(0,ne.j5)({display:s.active_button_enabled?"block":"none"})},[(0,i._)("button",{class:(0,ne.C_)(["btn",{"btn-outline-primary":"Save"===this.button_state,"btn-outline-danger":"Delete"===this.button_state}]),type:"button","data-bs-toggle":"modal",onClick:t[2]||(t[2]=(...e)=>this.modelOpen&&this.modelOpen(...e)),"data-bs-target":"Save"===this.button_state?"#saveModal":"#deleteModel"},(0,ne.zw)(this.button_state),11,jt)],4)]),(0,i._)("div",Ct,[(0,i._)("div",kt,[(0,i._)("div",Ot,[Pt,(0,i._)("div",It,[(0,i._)("div",Rt,[Mt,(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{type:"text",class:"form-control",id:"patchName","onUpdate:modelValue":t[3]||(t[3]=e=>this.patchName=e),key:this.forceRerender,autocomplete:"off","data-autofocus":""})),[[n.nr,this.patchName]])])]),(0,i._)("div",Et,[Nt,(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[4]||(t[4]=(...e)=>this.savePatch&&this.savePatch(...e))},"Save")])])])]),(0,i._)("div",Lt,[(0,i._)("div",Bt,[(0,i._)("div",At,[Ut,(0,i._)("div",Tt,[Wt,(0,i._)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal",onClick:t[5]||(t[5]=(...e)=>this.deletePatch&&this.deletePatch(...e)),onKeydown:t[6]||(t[6]=(0,n.D2)((t=>e.enterClicked()),["enter"]))},"Delete",32)])])])])],64)}var Zt={props:{patches:{type:Array},page_id:{type:String,required:!0}},name:"PatchSelector",data(){return{id:0,active_button_enabled:!0,button_state:"Save",patchName:"",forceRerender:0}},watch:{},methods:{patchChanged(){if(console.log(),localStorage.setItem(this.page_id,this.id),!this.patches)return;let e;for(let t of this.patches)if(this.id===t.id){e=t;break}e&&(this.active_button_enabled=e.editable,this.button_state=e.saved?"Delete":"Save",document.dispatchEvent(new CustomEvent("PatchChanged")))},savePatch(){document.dispatchEvent(new CustomEvent("PatchSave",{detail:this.patchName}))},deletePatch(){document.dispatchEvent(new CustomEvent("PatchDelete"))},modelOpen(){this.patchName=""}},mounted(){if(this.id=parseInt(localStorage.getItem(this.page_id)),!this.patches)return;let e;for(let t of this.patches)if(this.id===t.id){e=t;break}e&&(this.active_button_enabled=e.editable,this.button_state=e.saved?"Delete":"Save",document.addEventListener("shown.bs.modal",(()=>{"Save"===this.button_state&&document.getElementById("patchName").focus()})))}};const Ht=(0,g.Z)(Zt,[["render",zt]]);var Ft=Ht,$t={components:{PatchSelector:Ft,SwitchComponent:wt,SliderRangeCommand:mt,FileDropArea:Je,DisableCommand:He,DeviceSelector:Ee,SelectCommand:Ce,GroupOfCommands:we,SliderCommand:pe},props:{id:{type:String,required:!0}},methods:{sendData(){if(this.device){let e=[];this.commands_data.randomPlantVelocity.value?(this.device.send([240,11,16,127,247]),re(100)):(this.device.send([240,11,16,0,247]),re(100)),this.commands_data.plant_no_velocity.value&&(this.device.send([240,11,5,0,247]),re(100),this.device.send([240,11,15,0,247]),re(100),e.push("minPlantVelocity"),e.push("maxPlantVelocity")),this.commands_data.light_no_velocity.value&&(this.device.send([240,11,6,0,247]),re(100),this.device.send([240,11,17,0,247]),re(100),e.push("minLightVelocity"),e.push("maxLightVelocity")),this.commands_data.randomLightVelocity.value?(this.device.send([240,11,18,127,247]),re(100)):(this.device.send([240,11,18,0,247]),re(100));for(let t in this.commands_data)e.includes(t)||(this.commands_data[t].sendToMidi(this.device),re(100))}},saveData(){let e=[];for(let t in this.commands_data)e.push(this.commands_data[t].toShortDict());this.db.updatePatch(localStorage.getItem(this.id),e)},async loadData(){let e=await this.db.getPatch(localStorage.getItem(this.id));e||(localStorage.setItem(this.id,1),e=await this.db.getPatch(localStorage.getItem(this.id)));for(let t of e.data)this.commands_data[t.name].set_value(t.value);this.forceRerender++},returnDefault(){for(let e in this.commands_data)this.commands_data[e].set_default();this.saveData(),this.forceRerender+=1,this.device.send([240,11,7,247])},createPreset(){let e=[];for(let n in this.commands_data)e.push(this.commands_data[n].toShortDict());let t={commands:e},a=new File([JSON.stringify(t)],"biotron_preset.txt",{type:"text/plain;charset=utf-8"});(0,Ke.p)(a,"biotron_preset.txt")},async loadDataFromPreset(e){await this.patchChanged();for(let t of JSON.parse(e).commands)this.commands_data[t.name].set_value(t.value);this.saveData(),this.forceRerender++},async patchChanged(){let e=parseInt(localStorage.getItem(this.id));this.patches.find((t=>t.id===e)).saved&&(e=await this.db.getUnsavedPatch(),this.patches=await this.db.getPatch(),localStorage.setItem(this.id,e)),this.saveData()}},data(){return{scales:["Major","Minor","Chrom","Dorian","Mixolydian","Lydian","Wholetone","Minblues","Minpen","Majpen","Diminished"],device:null,forceRerender:0,patchRerender:0,db:{type:Dt},patches:[],patch_id:0,commands_data:{plantBpm:new me({name:"plantBpm",number_command:0,default_value:60,max_value:1e3}),lightBpm:new me({name:"lightBpm",number_command:9,default_value:4,max_value:30}),noteOffPercent:new me({name:"noteOffPercent",number_command:12,default_value:100,max_value:100}),noteDistance:new me({name:"noteDistance",number_command:1,default_value:50,max_value:100}),firstValue:new me({name:"firstValue",number_command:2,default_value:10,max_value:100}),smoothness:new me({name:"smoothness",number_command:3,max_value:99}),scale:new me({name:"scale",number_command:4,default_value:0}),minPlantVelocity:new me({name:"minPlantVelocity",number_command:15,default_value:74,max_value:127}),maxPlantVelocity:new me({name:"maxPlantVelocity",number_command:5,default_value:75,max_value:127}),minLightVelocity:new me({name:"minLightVelocity",number_command:17,default_value:74,max_value:127}),maxLightVelocity:new me({name:"maxLightVelocity",number_command:6,default_value:75,max_value:127}),randomness:new me({name:"randomness",number_command:10,default_value:0}),same_note:new me({name:"same_note",number_command:11,default_value:0,max_value:10}),min_range_light_note:new me({name:"min_range_light_note",number_command:13,default_value:24}),max_range_light_note:new me({name:"max_range_light_note",number_command:14,default_value:48}),plant_no_velocity:new me({name:"plant_no_velocity",default_value:0,sendable:!1}),light_no_velocity:new me({name:"light_no_velocity",default_value:0,sendable:!1}),randomPlantVelocity:new me({name:"randomPlantVelocity",default_value:0,sendable:!1}),randomLightVelocity:new me({name:"randomLightVelocity",default_value:0,sendable:!1})}}},async created(){void 0===localStorage.getItem(this.id)&&localStorage.setItem(this.id,"1"),this.db=new Dt,await this.db.openDB(),this.patches=await this.db.getPatch(),this.patch_id=parseInt(localStorage.getItem(this.id)),await this.loadData(),this.forceRerender++},mounted(){document.addEventListener("keyup",(e=>{"Enter"===e.code&&this.sendData()})),document.addEventListener("InputChanged",(async()=>{await this.patchChanged(),this.patchRerender++})),document.addEventListener("PatchChanged",(async()=>{await this.loadData(),this.forceRerender++})),document.addEventListener("PatchSave",(async e=>{this.db.savePatch(localStorage.getItem(this.id),e.detail),this.patches=await this.db.getPatch(),this.patchRerender++})),document.addEventListener("PatchDelete",(async()=>{this.db.deletePatch(parseInt(localStorage.getItem(this.id))),localStorage.setItem(this.id,"1"),this.patches=await this.db.getPatch(),await this.loadData(),this.forceRerender++}))}};const qt=(0,g.Z)($t,[["render",ae]]);var Gt=qt;const Jt=(0,i._)("h1",{class:"text-center"},"TouchMe change settings",-1),Kt={class:"row"},Yt={class:"col"},Qt=(0,i._)("label",{for:"humanizeSwitch"},"Humanize",-1),Xt={class:"col"},ea=(0,i._)("label",{for:"velocityDisableSwitch"},"Mute",-1),ta={key:0},aa={key:0},na={key:1},oa={class:"row"},ia={class:"col"},sa=(0,i._)("label",{for:"notesRangeSwitch"},"Custom Range",-1),la={key:0},ca=["disabled"];function da(e,t,a,n,o,s){const l=(0,i.up)("DeviceSelector"),c=(0,i.up)("SelectCommand"),d=(0,i.up)("GroupOfCommands"),m=(0,i.up)("SliderCommand"),r=(0,i.up)("SwitchComponent"),u=(0,i.up)("SliderRangeCommand"),h=(0,i.up)("FileDropArea");return(0,i.wg)(),(0,i.iD)(i.HY,null,[Jt,(0,i.Wm)(l,{"regex-name":"TouchMe",onDevice_changed:t[0]||(t[0]=e=>{this.device=e})}),(0,i.Wm)(d,{"name-of-group":"Scale"},{objects:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)(c,{key:this.forceRerender,"list-of-variants":this.scales,"command-object":this.touch_me_commands_data.Scale},null,8,["list-of-variants","command-object"]))])),_:1}),(0,i.Wm)(d,{"name-of-group":"Key"},{objects:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)(m,{"command-label":"",key:this.forceRerender,"command-object":this.touch_me_commands_data.Key},null,8,["command-object"]))])),_:1}),(0,i.Wm)(d,{"name-of-group":"Velocity"},{objects:(0,i.w5)((()=>[(0,i._)("div",Kt,[(0,i._)("div",Yt,[Qt,(0,i.Wm)(r,{id:"humanizeSwitch","model-value":this.isHumanize,"onUpdate:modelValue":t[1]||(t[1]=e=>{this.isHumanize=e,o.forceRerender++})},null,8,["model-value"])]),(0,i._)("div",Xt,[ea,(0,i.Wm)(r,{id:"velocityDisableSwitch","model-value":this.isMute,"onUpdate:modelValue":t[2]||(t[2]=e=>{this.isMute=e})},null,8,["model-value"])])]),this.isMute?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",ta,[this.isHumanize?((0,i.wg)(),(0,i.iD)("div",na,[((0,i.wg)(),(0,i.j4)(u,{key:this.forceRerender,"max-command-object":this.touch_me_commands_data.maxVelocity,"min-command-object":this.touch_me_commands_data.minVelocity},null,8,["max-command-object","min-command-object"]))])):((0,i.wg)(),(0,i.iD)("div",aa,[((0,i.wg)(),(0,i.j4)(m,{key:this.forceRerender,"command-object":this.touch_me_commands_data.maxVelocity},null,8,["command-object"]))]))]))])),_:1}),(0,i.Wm)(d,{"name-of-group":"Notes Range"},{objects:(0,i.w5)((()=>[(0,i._)("div",oa,[(0,i._)("div",ia,[sa,(0,i.Wm)(r,{id:"notesRangeSwitch","model-value":this.customRange,"onUpdate:modelValue":t[3]||(t[3]=e=>{this.customRange=e,o.forceRerender++})},null,8,["model-value"])])]),this.customRange?((0,i.wg)(),(0,i.iD)("div",la,[((0,i.wg)(),(0,i.j4)(u,{key:this.forceRerender,"max-command-object":this.touch_me_commands_data.highestNote,"min-command-object":this.touch_me_commands_data.lowestNote},null,8,["max-command-object","min-command-object"]))])):(0,i.kq)("",!0)])),_:1}),(0,i._)("button",{onClick:t[4]||(t[4]=(...e)=>this.sendData&&this.sendData(...e)),disabled:null==this.device,class:"btn btn-primary mb-1",style:{width:"70%"}},"Send",8,ca),(0,i._)("button",{onClick:t[5]||(t[5]=(...e)=>this.returnDefault&&this.returnDefault(...e)),class:"btn btn-primary mb-1",style:{width:"70%"}},"Set Default"),(0,i._)("button",{onClick:t[6]||(t[6]=(...e)=>this.createPreset&&this.createPreset(...e)),class:"btn btn-primary mb-1",style:{width:"70%"}},"Create Preset"),(0,i.Wm)(h,{name:"Drop Preset Here",onGet_drop:t[7]||(t[7]=e=>s.loadDataFromPreset(e))})],64)}var ma={components:{SliderRangeCommand:mt,SwitchComponent:wt,FileDropArea:Je,SliderCommand:pe,DeviceSelector:Ee,GroupOfCommands:we,SelectCommand:Ce},props:{id:{type:String,required:!0}},methods:{sendData(){this.device.send([240,11,5,this.isMute?1:0,247]),this.device.send([240,11,4,this.isHumanize?1:0,247]),this.device.send([240,11,6,this.customRange?0:1,247]);for(let e in this.touch_me_commands_data)this.touch_me_commands_data[e].sendToMidi(this.device),re(100);this.saveData()},saveData(){let e=[];for(let n in this.touch_me_commands_data)e.push(this.touch_me_commands_data[n].toString());let t={mute:this.isMute,humanize:this.isHumanize},a={commands:e,extra:t};localStorage.setItem(this.id,JSON.stringify(a))},loadData(){null===localStorage.getItem(this.id)&&this.saveData();for(let t of JSON.parse(localStorage.getItem(this.id)).commands){let e=JSON.parse(t);this.touch_me_commands_data[e.name].set_value(e.value)}let e=JSON.parse(localStorage.getItem(this.id)).extra;this.isMute=e.mute,this.isHumanize=e.humanize},returnDefault(){this.randomPlantVelocity=!1,this.randomLightVelocity=!1;for(let e in this.touch_me_commands_data)this.touch_me_commands_data[e].set_default();this.saveData(),this.forceRerender+=1,this.device.send([240,11,7,247])},loadDataFromPreset(e){for(let a of JSON.parse(e).commands){let e=JSON.parse(a);this.touch_me_commands_data[e.name].set_value(e.value)}let t=JSON.parse(localStorage.getItem(this.id)).extra;this.isMute=t.mute,this.isHumanize=t.humanize,this.forceRerender+=1},createPreset(){let e=[];for(let o in this.touch_me_commands_data)e.push(this.touch_me_commands_data[o].toString());let t={mute:this.isMute,humanize:this.isHumanize},a={commands:e,extra:t},n=new File([JSON.stringify(a)],"touchme_preset.txt",{type:"text/plain;charset=utf-8"});(0,Ke.p)(n,"touchme_preset.txt")}},data(){return{scales:["Major","Minor","Chrom","Dorian","Mixolydian","Lydian","Wholetone","Minblues","Minpen","Majpen","Diminished"],device:null,forceRerender:0,isHumanize:!1,isMute:!1,customRange:!1,touch_me_commands_data:{Scale:new me({name:"Scale",number_command:0,default_value:0,max_value:11}),Key:new me({name:"Key",number_command:1,default_value:1,min_value:1,max_value:12}),maxVelocity:new me({name:"maxVelocity",number_command:2,default_value:70,max_value:127}),minVelocity:new me({name:"minVelocity",number_command:3,default_value:50,max_value:127}),highestNote:new me({name:"highestNote",number_command:8,default_value:84,max_value:127}),lowestNote:new me({name:"lowestNote",number_command:7,default_value:48,max_value:127})}}},created(){null===localStorage.getItem(this.id)?this.saveData():this.loadData()}};const ra=(0,g.Z)(ma,[["render",da]]);var ua=ra;const ha=(0,i._)("h1",{class:"text-center"},"Scala Loader",-1),pa=(0,i._)("h1",{class:"text-center",style:{color:"red"}}," This page is being developed ",-1),_a=(0,i._)("h2",null,[(0,i.Uk)("Create your own scala file or choose from list on "),(0,i._)("a",{href:"https://isartum.net/leimma"},"Leimma")],-1),va={class:"row"},ga={class:"col-9"},ba={class:"col-3"};function fa(e,t,a,o,s,l){const c=(0,i.up)("DeviceSelector"),d=(0,i.up)("FileDropArea");return(0,i.wg)(),(0,i.iD)(i.HY,null,[ha,pa,_a,(0,i.Wm)(c,{"regex-name":"",onDevice_changed:t[0]||(t[0]=e=>{this.device=e})}),(0,i._)("div",va,[(0,i._)("div",ga,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>this.url=e),type:"text",id:"url_input",class:"form-control",placeholder:"Leimma link"},null,512),[[n.nr,this.url]])]),(0,i._)("div",ba,[(0,i._)("button",{onClick:t[2]||(t[2]=(...e)=>this.loadUrl&&this.loadUrl(...e)),class:"btn btn-primary mb-1",style:{width:"70%"}},"Send")])]),(0,i.Wm)(d,{name:"Drop Scala File Here",onGet_drop:t[3]||(t[3]=e=>this.loadFile(e))})],64)}var wa={components:{FileDropArea:Je,DeviceSelector:Ee},props:{},methods:{loadFile(e){let t=e.split("\n");if(!t[0].includes(".scl"))return;let a=t.lastIndexOf("!"),n=parseInt(t[a-1]),o=t.slice(a+1,a+n+1);this.convertCentsString(o,n)},loadUrl(){if(!this.url.includes("/tuningsystem"))return;let e=this.url.substring(this.url.lastIndexOf("/tuningsystem/")+14),t=e.substring(7,8);if("~"!==t&&"s"!==t)return void console.log("Strange Delimiter");let a=e.split(t);if("s"===t)for(let n=0;n<a.length;n++)a[n]=a[n].substring(4);a=a.slice(1),a.push("2r1"),this.convertCentsString(a,a.length,"r")},convertCentsString(e,t,a="/"){for(let n=0;n<t;n++)if(e[n].includes(a)){let t=e[n].split(a);e[n]=parseInt(1200*Math.log2(parseInt(t[0])/parseInt(t[1])))}else e[n]=parseInt(e[n]);this.sendCents(e)},sendCents(e){if(!this.device)return;let t=[240,11,20,13,1,247];this.device.send(t),console.log(t);let a=[];for(const o of e){a=[240,11,20,13,1];for(let e=0;e<Math.floor(o/127);e++)a.push(127);o%127!==0&&a.push(o%127),a.push(247),this.device.send(a),console.log(a),re(1e3)}let n=[240,11,20,13,127,247];this.device.send(n),console.log(n)}},data(){return{url:"",device:null}}};const ya=(0,g.Z)(wa,[["render",fa]]);var xa=ya;const Da=[{path:"/"},{path:"/biotron",component:Gt,props:{id:"BiotronWebMidiId_1"}},{path:"/touchme",component:ua,props:{id:"TouchmeWebMidiId_1"}},{path:"/scala",component:xa}],Sa=(0,o.p7)({history:(0,o.r5)(),linkActiveClass:"active",routes:Da});(0,n.ri)(f).use(Sa).mount("#app")}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,i){if(!n){var s=1/0;for(m=0;m<e.length;m++){n=e[m][0],o=e[m][1],i=e[m][2];for(var l=!0,c=0;c<n.length;c++)(!1&i||s>=i)&&Object.keys(a.O).every((function(e){return a.O[e](n[c])}))?n.splice(c--,1):(l=!1,i<s&&(s=i));if(l){e.splice(m--,1);var d=o();void 0!==d&&(t=d)}}return t}i=i||0;for(var m=e.length;m>0&&e[m-1][2]>i;m--)e[m]=e[m-1];e[m]=[n,o,i]}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,i,s=n[0],l=n[1],c=n[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);if(c)var m=c(a)}for(t&&t(n);d<s.length;d++)i=s[d],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(m)},n=self["webpackChunkweb_midi_playtronica"]=self["webpackChunkweb_midi_playtronica"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(7582)}));n=a.O(n)})();
//# sourceMappingURL=app.67700f1e.js.map